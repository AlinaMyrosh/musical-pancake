{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49461257-d92cdcbbc0ac75fcae3d36a6d';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(inputValue, page) {\n  const { data } = await axios(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n\n  return data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\n\nexport function createMarkup(hits, gallery) {\n  const markup = hits\n    .map(\n      hit => `\n    <a class=\"gallery-item\" href=\"${hit.largeImageURL}\">\n      <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><span>Likes:</span> ${hit.likes}</p>\n        <p><span>Views:</span> ${hit.views}</p>\n        <p><span>Comments:</span> ${hit.comments}</p>\n        <p><span>Downloads:</span> ${hit.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = '';\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n\nexport function showLoadingIndicator() {\n  loader.classList.remove('visually-hidden');\n}\n\nexport function hideLoadingIndicator() {\n  loader.classList.add('visually-hidden');\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('visually-hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('visually-hidden');\n}\n","import iziToast from 'izitoast';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  showErrorMessage,\n  createMarkup,\n  clearGallery,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n} from './js/render-functions.js';\n\nconst searchform = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-button');\n\nsearchform.addEventListener('submit', toSearch);\nloadMoreBtn.addEventListener('click', toLoadMore);\n\nlet page = 1;\nlet searchQuery = null;\n\nasync function toSearch(event) {\n  event.preventDefault();\n\n  hideLoadMoreBtn();\n\n  clearGallery(gallery);\n\n  const inputValue = event.target.elements['search-text'].value.trim();\n  searchQuery = inputValue;\n\n  if (!inputValue) {\n    showErrorMessage('You forgot important data');\n    return;\n  }\n\n  page = 1;\n\n  showLoadingIndicator();\n\n  try {\n    const { hits, totalHits } = await fetchImages(inputValue, page);\n    if (!hits.length) {\n      showErrorMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    createMarkup(hits, gallery);\n\n    if (gallery.querySelectorAll('a').length < totalHits) {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    showErrorMessage('Failed to load images. Please try again!');\n  } finally {\n    hideLoadingIndicator();\n  }\n}\n\nasync function toLoadMore() {\n  hideLoadMoreBtn();\n  showLoadingIndicator();\n  page += 1;\n\n  try {\n    const { hits, totalHits } = await fetchImages(searchQuery, page);\n    createMarkup(hits, gallery);\n\n    if (gallery.querySelectorAll('a').length < totalHits) {\n      showLoadMoreBtn();\n    } else {\n      showErrorMessage(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    showErrorMessage('Failed to load images. Please try again!');\n  } finally {\n    hideLoadingIndicator();\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","inputValue","page","data","axios","loader","loadMoreBtn","lightbox","SimpleLightbox","createMarkup","hits","gallery","markup","hit","clearGallery","showErrorMessage","message","iziToast","showLoadingIndicator","hideLoadingIndicator","showLoadMoreBtn","hideLoadMoreBtn","searchform","toSearch","toLoadMore","searchQuery","event","totalHits","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAYC,EAAM,CAClD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAML,EAAU,CACrC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,EAED,OAAOC,CACT,CCdA,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,KAChB,CAAC,EAEM,SAASC,EAAaC,EAAMC,EAAS,CAC1C,MAAMC,EAASF,EACZ,IACCG,GAAO;AAAA,oCACuBA,EAAI,aAAa;AAAA,kBACnCA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iCAEnBA,EAAI,KAAK;AAAA,iCACTA,EAAI,KAAK;AAAA,oCACNA,EAAI,QAAQ;AAAA,qCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,GAI7C,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CL,EAAS,QAAO,CAClB,CAEO,SAASO,EAAaH,EAAS,CACpCA,EAAQ,UAAY,EACtB,CAEO,SAASI,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,CACJ,CAAG,CACH,CAEO,SAASE,GAAuB,CACrCb,EAAO,UAAU,OAAO,iBAAiB,CAC3C,CAEO,SAASc,GAAuB,CACrCd,EAAO,UAAU,IAAI,iBAAiB,CACxC,CAEO,SAASe,GAAkB,CAChCd,EAAY,UAAU,OAAO,iBAAiB,CAChD,CAEO,SAASe,GAAkB,CAChCf,EAAY,UAAU,IAAI,iBAAiB,CAC7C,CC9CA,MAAMgB,EAAa,SAAS,cAAc,OAAO,EAC3CX,EAAU,SAAS,cAAc,UAAU,EAC3CL,EAAc,SAAS,cAAc,mBAAmB,EAE9DgB,EAAW,iBAAiB,SAAUC,CAAQ,EAC9CjB,EAAY,iBAAiB,QAASkB,CAAU,EAEhD,IAAItB,EAAO,EACPuB,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EAEpBL,IAEAP,EAAaH,CAAO,EAEpB,MAAMV,EAAayB,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAG9D,GAFAD,EAAcxB,EAEV,CAACA,EAAY,CACfc,EAAiB,2BAA2B,EAC5C,MACD,CAEDb,EAAO,EAEPgB,IAEA,GAAI,CACF,KAAM,CAAE,KAAAR,EAAM,UAAAiB,CAAW,EAAG,MAAM3B,EAAYC,EAAYC,CAAI,EACzDQ,EAAK,QACRK,EACE,0EACR,EAEIN,EAAaC,EAAMC,CAAO,EAEtBA,EAAQ,iBAAiB,GAAG,EAAE,OAASgB,GACzCP,GAEH,MAAe,CACdL,EAAiB,0CAA0C,CAC/D,QAAY,CACRI,GACD,CACH,CAEA,eAAeK,GAAa,CAC1BH,IACAH,IACAhB,GAAQ,EAER,GAAI,CACF,KAAM,CAAE,KAAAQ,EAAM,UAAAiB,CAAW,EAAG,MAAM3B,EAAYyB,EAAavB,CAAI,EAC/DO,EAAaC,EAAMC,CAAO,EAEtBA,EAAQ,iBAAiB,GAAG,EAAE,OAASgB,EACzCP,IAEAL,EACE,4DACR,EAII,MAAMa,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,MAAe,CACdb,EAAiB,0CAA0C,CAC/D,QAAY,CACRI,GACD,CACH"}